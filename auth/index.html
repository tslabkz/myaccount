<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>INSPINIA | Main page</title>

    <base href="../">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/plugins/ladda/ladda-themeless.min.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body class="">

    <div id="wrapper">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                
                
                <li class="nav-header">
                    <div class="dropdown profile-element">
                        
                        <a href="auth/index.html">
                            <span class="block m-t-xs font-bold">My Account</span>
                        </a>
                        
                    </div>
                    <div class="logo-element">
                        MY+
                    </div>
                </li>


                <li>
                    <a href="grid_options.html"><i class="fa fa-laptop"></i> <span class="nav-label">Grid options</span></a>
                </li>
               
                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> <span class="nav-label">Menu Levels </span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li>
                            <a href="#">Third Level <span class="fa arrow"></span></a>
                            <ul class="nav nav-third-level">
                                <li>
                                    <a href="#">Third Level Item</a>
                                </li>
                                <li>
                                    <a href="#">Third Level Item</a>
                                </li>
                                <li>
                                    <a href="#">Third Level Item</a>
                                </li>

                            </ul>
                        </li>
                        <li><a href="#">Second Level Item</a></li>
                        <li>
                            <a href="#">Second Level Item</a></li>
                        <li>
                            <a href="#">Second Level Item</a></li>
                    </ul>
                </li>

            </ul>

        </div>
    </nav>

        <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">

        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
        </div>

            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">Добро пожаловать в проект MyAccount.</span>
                </li>
                <li>
                    <a href="index.html" id="logout-link-el">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
            </ul>

        </nav>
        </div>
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-sm-12">
                    <h2>Проект MyAccount</h2>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="auth/index.html">Страница</a>
                        </li>
                        <li class="breadcrumb-item active">
                            <strong>Профиль</strong>
                        </li>
                    </ol>
                </div> 
            </div>

            <div class="wrapper wrapper-content">
                <div class="animated fadeInRightBig">
                    <!-- content:start -->
                    <div class="row">
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <!-- first column:start -->
                            <div class="ibox ">
                                <div class="ibox-title">
                                    <h5>Профиль <small class="m-l-sm">Персональные данные</small></h5>
                                    <div class="ibox-tools">
                                        <span id="status-label-el"></span>

                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a> 
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    
                                    <table class="table" id="profile-data-table" >
                                        <thead>
                                        <tr>
                                            <th>Поле</th>
                                            <th>Значение</th>
                                            <th>Примечание</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>Имя</td>
                                            <td>Otto</td>
                                            <td>@mdo</td>
                                        </tr>
                                        <tr>
                                            <td>Фамилия</td>
                                            <td>Thornton</td>
                                            <td>@fat</td>
                                        </tr>
                                        <tr>
                                            <td>Отчество</td>
                                            <td>the Bird</td>
                                            <td>@twitter</td>
                                        </tr>                                
                                        <tr>
                                            <td>ИНН</td>
                                            <td>the Bird</td>
                                            <td>@twitter</td>
                                        </tr>
                                        </tbody>
                                    </table>
        
                                </div>
                                
                                <div class="ibox-footer">
                                    <!-- <span class="float-right">
                                      The righ side of the footer
                                    </span> -->
                                    <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#editPersonalFormModal">
                                        Редактировать
                                    </button>
                                </div>

                            </div>
                            <!-- first column:end -->
<!-- modal start -->
<div class="modal inmodal fade" id="editPersonalFormModal" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Форма персональных данных</h4>
                <small class="font-bold">Здесь вы можете изменить персональные данные.</small>
            </div>
            <div class="modal-body">

                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Имя</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-name">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Фамилия</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-surname">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Отчество</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-lastname">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">День рождения</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-birthdate">
                    </div>
                </div> 
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Псевдоним</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-nickname">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Резидент</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-resident">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Национальность</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-nationality">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-4 col-form-label">Пол</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="personal-form-gender">
                    </div>
                </div>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Закрыть</button>
                <!-- <button type="button" class="btn btn-primary">Сохранить</button> -->
                <button class="ladda-button btn btn-primary" data-style="expand-left" id="personal-data-form-submit">
                    <span class="ladda-label">Сохранить</span><span class="ladda-spinner"></span>
                    <div class="ladda-progress" style="width: 0px;"></div>
                </button>
            </div>
        </div>
    </div>
</div>
<!-- modal end -->




                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            <!-- second column:start -->
                            <div class="ibox ">
                                <div class="ibox-title">
                                    <h5>Аккаунт <small class="m-l-sm">Идентификационные данные</small></h5>
                                    <div class="ibox-tools">
                                        <span id="account-status-label-el"></span>
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a> 
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    
                                    <table class="table"  id="account-data-table">
                                        <thead>
                                        <tr>
                                            <th>Поле</th>
                                            <th>Значение</th>
                                            <th>Примечание</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Инн</td>
                                                <td></td>
                                                <td><span class="text-danger">Не указан</span></td>
                                            </tr> 
                                        <tr>
                                            <td>Телефон</td>
                                            <td>87025687896</td>
                                            <td><span class="text-success">Подтвержден</span></td>
                                        </tr>
                                        <tr>
                                            <td>Эл почта</td>
                                            <td>erfdgd@mail.ru</td>
                                            <td><span class="label label-warning">Не подтвержден</span></td>
                                        </tr>                               
                                        <tr>
                                            <td>Логин</td>
                                            <td>someuser</td>
                                            <td></td>
                                        </tr>
                                        </tbody>
                                    </table>
        
                                </div>
                                


                                <div class="ibox-footer">
                                    <!-- <span class="float-right">
                                      The righ side of the footer
                                    </span> -->
                                    
                                <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#editAuthFormModal">
                                    Редактировать
                                </button>
                            </div>
                                    <!-- modal start -->
                                    <div class="modal inmodal fade" id="editAuthFormModal" tabindex="-1" role="dialog"  aria-hidden="true">
                                        <div class="modal-dialog modal-md">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                    <h4 class="modal-title">Форма данных авторизации</h4>
                                                    <small class="font-bold">Здесь вы можете изменить авторизационные данные, такие как телефон эл почту и тд.</small>
                                                </div>
                                                <div class="modal-body">

                                                    <div class="form-group  row">
                                                        <label class="col-sm-4 col-form-label">Телефон</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="auth-form-phone">
                                                            <span class="form-text m-b-none">После изменения номера телефона необходимо подтвердить, что бы им пользоваться.</span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group  row">
                                                        <label class="col-sm-4 col-form-label">Эл почта</label>
                                                        <div class="col-sm-8">
                                                            <input type="text" class="form-control" name="auth-form-email" >
                                                            <span class="form-text m-b-none">После изменения эл почты необходимо подтвердить, что бы им пользоваться.</span>
                                                        </div>
                                                    </div>

                                                    <div class="form-group  row">
                                                        <label class="col-sm-4 col-form-label">Логин</label>
                                                        <div class="col-sm-8"><input type="text" class="form-control" name="auth-form-login" ></div>
                                                    </div>

                                                    <div class="form-group  row">
                                                        <label class="col-sm-4 col-form-label">Пароль</label>
                                                        <div class="col-sm-8"><input type="text" class="form-control" name="auth-form-new_password" ></div>
                                                    </div>
                                                </div>
        
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-white" data-dismiss="modal">Закрыть</button>
                                                    <!-- <button type="button" class="btn btn-primary">Сохранить</button> -->
                                                    <button class="ladda-button btn btn-primary" data-style="expand-left" id="auth-data-form-submit">
                                                        <span class="ladda-label">Сохранить</span><span class="ladda-spinner"></span>
                                                        <div class="ladda-progress" style="width: 0px;"></div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- modal end -->
<!-- modal confirm phone:start -->
<div class="modal inmodal fade" id="confirmPhoneFormModal" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Подтверждение телефона</h4>
            </div>
            <div class="modal-body">
                
                
                <div class="form-group">
                    <button class="ladda-button  btn btn-outline btn-info form-control" 
                            id="phone-confirm-send-sms-submit"
                            data-style="slide-left">
                        <span class="ladda-label">Запросить код</span>
                        <span class="ladda-spinner"></span>
                        <div class="ladda-progress" style="width: 0px;"></div>
                    </button>
                </div>

                <div class="form-group">
                    <input type="text" placeholder="Смс код" class="form-control" name="phone-confirm-code" disabled>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Закрыть</button>
                <button class="ladda-button  btn btn-outline btn-primary form-control" 
                        id="phone-confirm-submit"
                        data-style="slide-left"
                        disabled
                        >
                    <span class="ladda-label">Подтвердить</span>
                    <span class="ladda-spinner"></span>
                    <div class="ladda-progress" style="width: 0px;"></div>
                </button>
                <!-- <button type="button" class="btn btn-primary" disabled>Подтвердить</button> -->

            </div>
        </div>
    </div>
</div>
<!-- modal confirm phone:end -->
<!-- modal confirm email:start -->
<div class="modal inmodal fade" id="confirmEmailFormModal" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Подтверждение эл почты</h4>
            </div>
            <div class="modal-body">
                
                
                <div class="form-group">
                    <button class="ladda-button  btn btn-outline btn-info form-control" 
                            id="email-confirm-send-sms-submit"
                            data-style="slide-left">
                        <span class="ladda-label">Запросить код</span>
                        <span class="ladda-spinner"></span>
                        <div class="ladda-progress" style="width: 0px;"></div>
                    </button>
                </div>

                <div class="form-group">
                    <input type="text" placeholder="Код" class="form-control" name="email-confirm-code" disabled>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Закрыть</button>
                <button class="ladda-button  btn btn-outline btn-primary form-control" 
                        id="email-confirm-submit"
                        data-style="slide-left"
                        disabled
                        >
                    <span class="ladda-label">Подтвердить</span>
                    <span class="ladda-spinner"></span>
                    <div class="ladda-progress" style="width: 0px;"></div>
                </button>
                <!-- <button type="button" class="btn btn-primary" disabled>Подтвердить</button> -->

            </div>
        </div>
    </div>
</div>
<!-- modal confirm email:end -->
                            </div>
                            <!-- second column:end -->
                        </div>
                    </div>
                    <!-- content:end --> 
                </div>
            </div>

            <div class="footer">
                <div class="float-right">
                    10GB of <strong>250GB</strong> Free.
                </div>
                <div>
                    <strong>Copyright</strong> Example Company &copy; 2014-2018
                </div>
            </div>

        </div>
        </div>

    <!-- Mainly scripts -->
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>
     
    <!-- Ladda -->
    <script src="js/plugins/ladda/spin.min.js"></script>
    <script src="js/plugins/ladda/ladda.min.js"></script>
    <script src="js/plugins/ladda/ladda.jquery.min.js"></script>

    <script src="js/project.js"></script>
    <script type="text/javascript">

    $(document).ready(function() {

        //--------------------------------------------
        //--------------------------------------------
        // запрос кода
        $("#email-confirm-send-sms-submit").click(function(e){
            e.preventDefault();
            var l = Ladda.create(this);
            l.start();
            let data = {};
            data['email'] = project.auth.getData().account.email;
            let url = project.buildUrl('user.confirmEmail_Step_1', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    $("input[name=email-confirm-code]").removeAttr('disabled');
                    $("#email-confirm-submit").removeAttr('disabled');
                    $("input[name=email-confirm-code]").focus(); 
                } else {
                    // пока нет обработки ошибок
                }
            })
            .fail(function(response) {
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        // подтверждение кода
        $("#email-confirm-submit").click(function(e){
            e.preventDefault();
            var l = Ladda.create(this);
            l.start();
            let data = {};
            data['email'] = project.auth.getData().account.email;
            data['code'] = $("input[name=email-confirm-code]").val();
            let url = project.buildUrl('user.confirmEmail_Step_2', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    authData = project.auth.getData(); 
                    Object.keys(response.data).forEach(function(editedProp) { 
                        authData.account[editedProp] = response.data[editedProp]; 
                    }); 
                    project.auth.setData(authData); 
                    window.location.reload(); 
                } else {
                    // пока нет обработки ошибок
                }
            })
            .fail(function(response) {
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        //--------------------------------------------
        // запрос смс кода
        $("#phone-confirm-send-sms-submit").click(function(e){
            e.preventDefault();
            var l = Ladda.create(this);
	 	    l.start();
            let data = {};
            data['phone'] = project.auth.getData().account.phone;
            let url = project.buildUrl('user.confirmPhone_Step_1', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    $("input[name=phone-confirm-code]").removeAttr('disabled');
                    $("#phone-confirm-submit").removeAttr('disabled');
                    $("input[name=phone-confirm-code]").focus(); 
                } else {
                    // пока нет обработки ошибок
                }
            })
            .fail(function(response) {
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        // подтверждение смс кода
        $("#phone-confirm-submit").click(function(e){
            e.preventDefault();
            var l = Ladda.create(this);
	 	    l.start();
            let data = {};
            data['phone'] = project.auth.getData().account.phone;
            data['code'] = $("input[name=phone-confirm-code]").val();
            let url = project.buildUrl('user.confirmPhone_Step_2', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    authData = project.auth.getData(); 
                    Object.keys(response.data).forEach(function(editedProp) { 
                        authData.account[editedProp] = response.data[editedProp]; 
                    }); 
                    project.auth.setData(authData); 
                    window.location.reload(); 
                } else {
                    // пока нет обработки ошибок
                }
            })
            .fail(function(response) {
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        //--------------------------------------------
        $("#personal-data-form-submit").click(function(e){
            var l = Ladda.create(this);
	 	    l.start();
            e.preventDefault();
            var data = {};
            let authData = project.auth.getData().account;
            data['uuid'] = authData.uuid;
            let props = [
                'name', 'surname','birthdate', 'nickname'
                , 'resident', 'nationality', 'gender'
            ];
            props.forEach(function(prop){
                let el = "input[name=personal-form-"+prop+"]"; 
                if ($(el).val().length > 0) {
                    data[prop] = $(el).val();
                }
            });
            let url = project.buildUrl('user.editPersonalForm', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    authData = project.auth.getData(); 
                    let updated_data = response.data.updated_data;
                    Object.keys(updated_data).forEach(function(editedProp) { 
                        authData.profile[editedProp] = updated_data[editedProp];
                    }); 
                    project.auth.setData(authData); 
                    window.location.reload();  
                }
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        //--------------------------------------------
        $("#auth-data-form-submit").click(function(e){
            var l = Ladda.create(this);
	 	    l.start();
            e.preventDefault();

            var data = {};
            let authData = project.auth.getData().account;
            data['uuid'] = authData.uuid;
            if ($("input[name=auth-form-email]").val().length > 0) {
                data['email'] = $("input[name=auth-form-email]").val();
            }

            if ($("input[name=auth-form-phone]").val().length > 0) {
                data['phone'] = $("input[name=auth-form-phone]").val();
            }

            if ($("input[name=auth-form-login]").val().length > 0) {
                data['login'] = $("input[name=auth-form-login]").val();
            }

            if ($("input[name=auth-form-new_password]").val().length > 0) { 
                data['new_password'] = $("input[name=auth-form-new_password]").val();
            }

            let url = project.buildUrl('user.editAuthForm', data);
            $.get(url, function(response) { 
                if (response.success) { 
                    authData = project.auth.getData(); 
                    Object.keys(response.data).forEach(function(editedProp) { 
                        authData.account[editedProp] = response.data[editedProp]; 
                    }); 
                    project.auth.setData(authData); 
                    window.location.reload();  
                } else { 
                }
            })
            .always(function() {
                l.stop(); 
            }); 
        });
        //--------------------------------------------
        if (!project.auth.isLogged()) {
            window.location = 'index.html';
        }
        $("#logout-link-el").click(function(event){
            event.preventDefault();
            project.auth.logOut();
            window.location = 'index.html';
        });
        //--------------------------------------------
        // заполняем профильные данные
        // profile-data-table
        $("#profile-data-table tbody").html("");
        let appendTrHtml = "";
        let authData = project.auth.getData();
        let profileData = authData.profile;
        
        let nameTemplate = '<tr>' +
                        '<td>Имя</td>' + 
                        '<td>%name%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        let nameHtml = nameTemplate.replace('%name%', profileData.name);
        $("#profile-data-table tbody").append(nameHtml);
        
        let surnameHtml = '<tr>' +
                        '<td>Фамилия</td>' + 
                        '<td>%surname%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        appendTrHtml = surnameHtml.replace('%surname%', profileData.surname);
        $("#profile-data-table tbody").append(appendTrHtml);

        let lastnameHtml = '<tr>' +
                        '<td>Отчество</td>' + 
                        '<td>%lastname%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        appendTrHtml = lastnameHtml.replace('%lastname%', profileData.lastname);
        $("#profile-data-table tbody").append(appendTrHtml);

        let birthdateHtml = '<tr>' +
                        '<td>День рождения</td>' + 
                        '<td>%birthdate%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        let bDataStr = '';
        if (profileData.birthdate.length > 0)  {
            if (profileData.birthdate.length > 10) {
                let bDate = new Date(profileData.birthdate);
                bDataStr = bDate.getDate() + '-' + bDate.getUTCMonth() + '-' + bDate.getFullYear();
            } else {
                bDataStr = profileData.birthdate;
            }
        }
        appendTrHtml = birthdateHtml.replace('%birthdate%', bDataStr);
        $("#profile-data-table tbody").append(appendTrHtml);
        //-------
        let nicknameHtml = '<tr>' +
                        '<td>Псевдоним</td>' + 
                        '<td>%nickname%</td>' + 
                        '<td></td>' + 
                        '</tr>'; 
        appendTrHtml = nicknameHtml.replace('%nickname%', profileData.nickname);
        $("#profile-data-table tbody").append(appendTrHtml);
        //-------
        let nationalityHtml = '<tr>' +
                        '<td>Национальность</td>' + 
                        '<td>%nationality%</td>' + 
                        '<td></td>' + 
                        '</tr>'; 
        appendTrHtml = nationalityHtml.replace('%nationality%', profileData.nationality);
        $("#profile-data-table tbody").append(appendTrHtml);
        //-------
        let residentHtml = '<tr>' +
                        '<td>Резидент</td>' + 
                        '<td>%resident%</td>' + 
                        '<td></td>' + 
                        '</tr>'; 
        appendTrHtml = residentHtml.replace('%resident%', profileData.resident);
        $("#profile-data-table tbody").append(appendTrHtml);
        //-------
        //-------
        let genderHtml = '<tr>' +
                        '<td>Пол</td>' + 
                        '<td>%gender%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        appendTrHtml = genderHtml.replace('%gender%', profileData.gender);
        $("#profile-data-table tbody").append(appendTrHtml);
        let profileStatusHtml = '<span class="label label-warning-light">Пустой</span>';
        if (profileData.status == 'filled') {
            profileStatusHtml = '<span class="label label-info">Заполенен</span>';
        }
        if (profileData.status == 'confirmed') {
            profileStatusHtml = '<span class="label label-primary">Подтвержден</span>';
        } 
        $("#status-label-el").html(profileStatusHtml);
        //--------------------------------------------
        $("#account-data-table tbody").html("");
        appendTrHtml = "";
        htmlTemplate = "";
        editedHtml = "";
        let account = profileData = authData.account;
        //-------
        // account-status-label-el
        let accountStatusHtml = '<span class="label label-warning-light">inactive</span>';
        if (profileData.status == 'active') {
            accountStatusHtml = '<span class="label label-primary">Активен</span>';
        } 
        $("#account-status-label-el").html(accountStatusHtml);
        //-------
        htmlTemplate = '<tr>' +
                        '<td>ИНН</td>' + 
                        '<td>%iin%</td>' + 
                        '<td>%status%</td>' + 
                        '</tr>';
        editedHtml = htmlTemplate.replace('%iin%', account.iin);
        let iinStatusStr = "";
        if (account.iin_status) {    
            iinStatusStr = "Статус одобрения: " + account.iin_status;
        }
        editedHtml = editedHtml.replace('%status%', iinStatusStr);
        $("#account-data-table tbody").append(editedHtml);
        //---
        htmlTemplate = '<tr>' +
                        '<td>Телефон</td>' + 
                        '<td>%phone% <br />%status% </td>' + 
                        '<td>%button%</td>' + 
                        '</tr>';
        editedHtml = htmlTemplate.replace('%phone%', account.phone);
        let phoneAproved = "";
        let confirmPhoneButton = "";
        if (account.phone.length > 0) {
            // 
            phoneAproved = "<small class='text-danger'>Не подтвержден</small>";
            confirmPhoneButton ='<button class="btn btn-xs btn-primary"  data-toggle="modal" data-target="#confirmPhoneFormModal" >Подтвердить</button>';
            if (account.phone_status == 1) {
                phoneAproved = "";
                confirmPhoneButton = "<span class='text-success'>Подтвержден</span>";
            }
        }
        editedHtml = editedHtml.replace('%status%', phoneAproved);
        editedHtml = editedHtml.replace('%button%', confirmPhoneButton);
        $("#account-data-table tbody").append(editedHtml);
        // -----
        htmlTemplate = '<tr>' +
                        '<td>Email</td>' + 
                        '<td>%email% <br />%status%</td>' + 
                        '<td>%button%</td>' + 
                        '</tr>';
        let emailText = (account.email) ? account.email : '<span class="text-muted" >не указан</span>' ;
        let confirmEmailButton = "";
        editedHtml = htmlTemplate.replace('%email%', emailText);
        let emailAproved = "";
        if (account.email.length > 0) {
            emailAproved = "<small class='text-danger'>Не подтвержден</small>";
            confirmEmailButton ='<button class="btn btn-xs btn-primary"  data-toggle="modal" data-target="#confirmEmailFormModal" >Подтвердить</button>';
            if (account.email_status == 1) {
                emailAproved = "";
                confirmEmailButton = "<span class='text-success'>Подтвержден</span>";
            }
        }
        editedHtml = editedHtml.replace('%status%', emailAproved);
        editedHtml = editedHtml.replace('%button%', confirmEmailButton);
        $("#account-data-table tbody").append(editedHtml);
        // -----
        htmlTemplate = '<tr>' +
                        '<td>Login</td>' + 
                        '<td>%login%</td>' + 
                        '<td></td>' + 
                        '</tr>';
        let loginText = (account.login) ? account.login : '<span class="text-muted" >не указан</span>' ;
        editedHtml = htmlTemplate.replace('%login%', loginText); 
        $("#account-data-table tbody").append(editedHtml);
        /*
        // 980611407147
        */
    });

    </script>

</body>

</html>
